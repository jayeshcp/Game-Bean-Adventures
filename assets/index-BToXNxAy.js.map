{"version":3,"file":"index-BToXNxAy.js","sources":["../../src/engine.js","../../src/scenes/LEVELS.js","../../src/scenes/game.js","../../src/scenes/lose.js","../../src/scenes/splash.js","../../src/scenes/win.js","../../src/main.js"],"sourcesContent":["import kaplay from \"kaplay\";\n// import \"kaplay/global\"; // uncomment if you want to use without the k. prefix\n\nconst k = kaplay({\n  global: false,\n});\n// debug.inspect = true;\n\nk.loadRoot(\"./\"); // A good idea for Itch.io publishing later\n\nexport default k;\n","// Design levels\nexport const LEVELS = [\n  [\n    \"@     $ $    $  $     $$     $\",\n    \"       ===    =====    ==   ==\",\n    \"     = $     =       $= $  == \",\n    \"   ^ $$        ^       $     >\",\n    \"=========   ====== === =  ====\"\n  ],\n  [\n    \"@   $        \",\n    \"    $ $      \",\n    \"    $    #  >\",\n    \"=   =  ==== =\"\n  ],\n  [\n    \"@                                 $>\",\n    \"   =  ==    ====                ====\",\n    \"         ==     $   ===           ==\",\n    \"   ==   $      ==        =     ==   \",\n    \"        ==          =  $    =      $\",\n    \"   ==        ==     =======        =\",\n    \"========    ===================     \",\n    \"          $                      == \",\n    \"          =             ======      \"\n  ],\n  [\n    \"@     $$>\",\n    \"      $$$\",\n    \"  $$$   $\",\n    \"     ==  \",\n    \"   $    $\",\n    \"  ==     \",\n    \"  $     $\",\n    \"    ==   \",\n    \"   $    $\",\n    \"       ==\",\n    \"     $   \",\n    \"     ==  \",\n    \"   $$$$$$\",\n    \"  ==     \",\n    \"  $      \",\n    \"    ==   \",\n    \"     $   \",\n    \"       ==\",\n    \"     $   \",\n    \"     ==  \",\n    \"     $   \",\n    \"  ==     \",\n    \"    $$$$ \",\n    \"    ==   \",\n    \"      $$ \",\n    \"      == \",\n    \"     $   \",\n    \"     = $ \",\n    \"   ^ $$  \",\n    \"=========\",\n  ]\n];\n","import k from \"../engine.js\";\nimport { LEVELS } from \"./LEVELS.js\";\n\nk.setGravity(2400);\n\nconst SPEED = 480;\n\nexport default async function game({ levelIdx, score }) {\n  k.setBackground(\"#2E8BC0\");\n\n  // Use the level passed, or first level\n  const level = k.addLevel(LEVELS[levelIdx || 0], {\n    tileWidth: 64,\n    tileHeight: 64,\n    pos: k.vec2(100, 200),\n    tiles: {\n      \"@\": () => [k.sprite(\"bean\"), k.area(), k.body(), k.anchor(\"bot\"), \"player\"],\n      \"#\": () => [k.sprite(\"ghosty\"), k.scale(0.8), k.area(), k.body({ isStatic: true }), k.anchor(\"bot\"), \"danger\"],\n      \"=\": () => [\n        k.sprite(\"grass\"),\n        k.area(),\n        k.body({ isStatic: true }),\n        k.anchor(\"bot\"),\n      ],\n      $: () => [k.sprite(\"coin\"), k.area(), k.anchor(\"bot\"), \"coin\"],\n      \"^\": () => [k.sprite(\"spike\"), k.area(), k.anchor(\"bot\"), \"danger\"],\n      \">\": () => [k.sprite(\"portal\"), k.area(), k.anchor(\"bot\"), \"portal\"],\n    },\n  });\n\n  // Score counter text\n  const scoreLabel = k.add([\n    k.text(`Score: ${score}`, { size: 36 }),\n    k.pos(50, 50),\n    k.layer(\"ui\"),\n    k.fixed()\n  ]);\n\n  let maxScore = k.getData(\"maxScore\", 0);\n  const maxScoreLabel = k.add([\n    k.text(`Max Score: ${maxScore}`, { size: 18 }),\n    k.pos(50, 100),\n    k.layer(\"ui\"),\n    k.fixed()\n  ]);\n\n  function increaseScore(increment = 1) {\n    score += increment;\n    scoreLabel.text = `Score: ${score}`;\n\n    // update max score\n    maxScore = k.getData(\"maxScore\", 0);\n    if (score > maxScore) {\n      maxScore = score;\n      k.setData(\"maxScore\", maxScore);\n      maxScoreLabel.text = `Max Score: ${maxScore}`;\n    }\n  }\n\n  // Get the player object from tag\n  const player = level.get(\"player\")[0];\n  player.pos = level.tile2Pos(0, 0);\n  player.onUpdate(() => {\n     k.setCamPos(player.worldPos());\n  });\n\n  // Movements\n  k.onKeyPress(\"space\", () => {\n    if (player.isGrounded()) {\n      player.jump(800);\n    }\n  });\n\n  k.onKeyDown(\"left\", () => {\n    player.move(-SPEED, 0);\n  });\n\n  k.onKeyDown(\"right\", () => {\n    player.move(SPEED, 0);\n  });\n\n  player.onCollide(\"danger\", () => {\n    k.play(\"hit\");\n    // Go to \"lose\" scene when we hit a \"danger\"\n    k.go(\"lose\");\n  });\n\n  player.onCollide(\"coin\", (coin) => {\n    k.destroy(coin);\n    k.play(\"score\");\n    increaseScore();\n  });\n\n  // Fall death\n  player.onUpdate(() => {\n    if (player.pos.y >= 2000) {\n      k.play(\"hit\");\n      k.go(\"lose\");\n    }\n  });\n\n  // Enter the next level on portal\n  player.onCollide(\"portal\", () => {\n    k.play(\"bell\");\n    if (levelIdx < LEVELS.length - 1) {\n      // If there's a next level, go() to the same scene but load the next level\n      k.go(\"game\", {\n        levelIdx: levelIdx + 1,\n        score: score,\n      });\n    } else {\n      // Otherwise we have reached the end of game, go to \"win\" scene!\n      k.go(\"win\", { score: score });\n    }\n  });\n}\n","import k from \"../engine.js\";\n\nexport default async function lose() {\n  gtag(\"event\", \"lose\", {\n    event_category: \"game\",\n    event_label: \"lose\",\n  });\n\n  k.setBackground([90, 40, 40]);\n\n  k.add([k.text(\"You Lose! ðŸ‘»\", { size: 56 }), k.pos(40, 120)]);\n\n  // Press any key to go back\n  k.onKeyPress(() => {\n    k.go(\"game\", {\n        levelIdx: 0,\n        score: 0,\n    });\n  });\n}\n","import k from \"../engine.js\";\n\nexport default async function splash() {\n  k.setBackground(\"#FADCD9\");\n\n  k.add([\n    k.text(\"Bean Adventures\", { size: 48, align: \"center\" }),\n    k.pos(200, 200),\n    k.color(120, 120, 40),\n    k.layer(\"ui\"),\n    k.scale(1)\n  ]);\n\n  k.add([\n    k.text(\"Press any key or click to start\", { size: 36, align: \"center\" }),\n    k.pos(200, 300),\n    k.color(80, 80, 80),\n    k.layer(\"ui\"),\n    k.scale(1)\n  ]);\n\n  async function goToGame() {\n    await k.wait(0.8);\n    // Game background music\n    k.play(\"background\", {\n      volume: 0.1,\n      loop: true,\n    });\n\n    k.go(\"game\", {\n      levelIdx: 0,\n      score: 0,\n    });\n  }\n\n  k.onClick(async () => {\n    k.addKaboom(k.mousePos());\n    goToGame();\n  });\n\n  k.onKeyPress(async () => {\n    k.addKaboom(k.vec2(200, 200));\n    goToGame();\n  });\n}","import k from \"../engine.js\";\n\nexport default async function win({ score }) {\n  gtag(\"event\", \"win\", {\n    event_category: \"game\",\n    event_label: \"win\",\n    value: score,\n  });\n\n  k.setBackground([40, 60, 40]);\n  k.add([\n    k.text(`You grabbed ${score} coins!!!`, {\n      size: 56,\n      width: k.width(),\n    }),\n    k.pos(50, 120),\n    k.layer(\"ui\"),\n  ]);\n\n  let maxScore = k.getData(\"maxScore\", 0);\n  k.add([\n    k.text(`Max Score: ${maxScore}`, { size: 18 }),\n    k.pos(50, 200),\n    k.layer(\"ui\"),\n  ]);\n\n  k.onKeyPress(() => {\n    k.go(\"game\", {\n        levelIdx: 0,\n        score: 0,\n    });\n  });\n}\n","import k from \"./engine.js\";\nimport game from \"./scenes/game.js\";\nimport lose from \"./scenes/lose.js\";\nimport splash from \"./scenes/splash.js\";\nimport win from \"./scenes/win.js\";\n\nk.loadSprite(\"bean\", \"sprites/bean.png\");\nk.loadSprite(\"coin\", \"/sprites/coin.png\");\nk.loadSprite(\"spike\", \"/sprites/spike.png\");\nk.loadSprite(\"grass\", \"/sprites/grass.png\");\nk.loadSprite(\"ghosty\", \"/sprites/ghosty.png\");\nk.loadSprite(\"portal\", \"/sprites/portal.png\");\n\nk.loadMusic(\"background\", \"/sounds/background.mp3\");\nk.loadSound(\"score\", \"/sounds/score.mp3\");\nk.loadSound(\"portal\", \"/sounds/portal.mp3\");\nk.loadSound(\"hit\", \"/sounds/hit.mp3\");\nk.loadSound(\"bell\", \"/sounds/bell.mp3\");\n\nk.scene(\"splash\", splash);\nk.scene(\"game\", game);\nk.scene(\"win\", win);\nk.scene(\"lose\", lose);\n\nk.setLayers([\"obj\", \"ui\"], \"obj\");\n\nk.go(\"splash\");\n\n// k.go(\"game\", {\n//   levelIdx: 3,\n//   score: 0,\n// });\n"],"names":["k","kaplay","LEVELS","SPEED","game","levelIdx","score","level","scoreLabel","maxScore","maxScoreLabel","increaseScore","increment","player","coin","lose","splash","goToGame","win"],"mappings":"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"}